@using TorrentWebscrape_blazor.Service
@using Torrent_Webscrape_blazor.Model
@inject StateContainer _StateContainer
@inject NavigationManager _navigationManager

<style>

    .button-refresh-update:hover{
      transition: all 0.8s ease-in-out 0s;
  box-shadow: 0 5px 15px rgba(39, 153, 219, 0.4);
  border-radius: 50px;
  padding:5px;
  animation: movingArrow 0.8s infinite;




    }

    
      @@keyframes movingArrow {
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
}

</style>


<div class="d-flex d-flex justify-content-center align-content-center">

    <h1 style="position:relative;top:40px; color:dimgray;">Top 25</h1>

<button @onclick=@UpdateTorrentList    style="margin:40px;">

  <img class="button-refresh-update"  src ="/Resources/Body/refresh image.png" height="50px"/>

</button>
</div>

@code {



    private async Task UpdateTorrentList()
    {
        try { 
                     _StateContainer.LoadingStateProperty = true;
            await new MongoDB_Services().UpdateAllTorrentList();
        } finally
        {

                  _navigationManager.NavigateTo("/");
            _StateContainer.LoadingStateProperty = false;
         

        }
    }



        protected override void OnInitialized()
    {
        _StateContainer.OnChange += StateHasChanged;
    }



    public void Dispose()
    {
        _StateContainer.OnChange -= StateHasChanged;
    }


}
